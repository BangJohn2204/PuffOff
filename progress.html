<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress - PuffOff</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <link rel="stylesheet" href="css/progress.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-chart-bar"></i> Progress Tracker</h1>
            <p>Pantau perjalanan bebas rokokmu</p>
        </div>

        <!-- Main Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ”¥</div>
                <div class="stat-value" id="smokeFreedays">7</div>
                <div class="stat-label">Hari Bebas Rokok</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ’°</div>
                <div class="stat-value" id="moneySaved">Rp 210K</div>
                <div class="stat-label">Uang Dihemat</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸš«</div>
                <div class="stat-value" id="cigarettesAvoided">84</div>
                <div class="stat-label">Rokok Dihindari</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">â¤ï¸</div>
                <div class="stat-value" id="healthScore">78%</div>
                <div class="stat-label">Health Score</div>
            </div>
        </div>

        <!-- Current Milestone -->
        <div class="milestone-card">
            <div class="milestone-icon">ğŸ¯</div>
            <div class="milestone-title">Target Berikutnya: 2 Minggu Bebas Rokok</div>
            <div class="milestone-desc">Kamu sudah 50% menuju target 2 minggu! Terus pertahankan!</div>
            <div class="milestone-progress">
                <div class="milestone-progress-bar" style="width: 50%"></div>
            </div>
        </div>

        <!-- Smartwatch Integration Section -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">
                    <i class="section-icon fas fa-watch"></i>
                    Smartwatch Monitor
                </div>
                <div class="smartwatch-status" id="smartwatchStatus">
                    <span class="status-dot disconnected"></span>
                    <span class="status-text">Tidak Terhubung</span>
                </div>
            </div>

            <!-- Smartwatch Connection Card -->
            <div class="smartwatch-card" id="smartwatchCard">
                <div class="smartwatch-icon">
                    <i class="fas fa-watch"></i>
                </div>
                <div class="smartwatch-info">
                    <h4>Hubungkan Smartwatch</h4>
                    <p>Monitor kesehatan dan emosi secara real-time untuk mencegah keinginan merokok</p>
                    <div class="device-support">
                        <span class="support-item"><i class="fab fa-apple"></i> Apple Watch</span>
                        <span class="support-item"><i class="fab fa-google"></i> Wear OS</span>
                        <span class="support-item"><i class="fas fa-heartbeat"></i> Fitbit</span>
                        <span class="support-item"><i class="fas fa-watch"></i> Samsung Galaxy</span>
                    </div>
                    <button class="connect-btn" onclick="connectSmartwatch()" id="connectBtn">
                        <i class="fas fa-bluetooth"></i>
                        <span>Hubungkan Perangkat</span>
                    </button>
                </div>
            </div>

            <!-- Real-time Health Data (shown when connected) -->
            <div class="realtime-health" id="realtimeHealth" style="display: none;">
                <!-- Live Health Metrics -->
                <div class="health-grid">
                    <div class="health-metric" data-metric="heart-rate">
                        <div class="metric-icon">â¤ï¸</div>
                        <div class="metric-value" id="heartRate">72</div>
                        <div class="metric-label">BPM</div>
                        <div class="metric-status normal" id="heartRateStatus">Normal</div>
                        <div class="metric-trend" id="heartTrend">
                            <i class="fas fa-arrow-down"></i>
                            <span>-3 dari kemarin</span>
                        </div>
                    </div>
                    <div class="health-metric" data-metric="stress">
                        <div class="metric-icon">ğŸ§ </div>
                        <div class="metric-value" id="stressLevel">23</div>
                        <div class="metric-label">Stress Level</div>
                        <div class="metric-status good" id="stressStatus">Rendah</div>
                        <div class="metric-trend" id="stressTrend">
                            <i class="fas fa-arrow-down"></i>
                            <span>Membaik</span>
                        </div>
                    </div>
                    <div class="health-metric" data-metric="oxygen">
                        <div class="metric-icon">ğŸ©¸</div>
                        <div class="metric-value" id="oxygenLevel">98</div>
                        <div class="metric-label">SpO2 (%)</div>
                        <div class="metric-status excellent" id="oxygenStatus">Excellent</div>
                        <div class="metric-trend" id="oxygenTrend">
                            <i class="fas fa-arrow-up"></i>
                            <span>+2% minggu ini</span>
                        </div>
                    </div>
                    <div class="health-metric" data-metric="sleep">
                        <div class="metric-icon">ğŸ˜´</div>
                        <div class="metric-value" id="sleepQuality">85</div>
                        <div class="metric-label">Sleep Score</div>
                        <div class="metric-status good" id="sleepStatus">Baik</div>
                        <div class="metric-trend" id="sleepTrend">
                            <i class="fas fa-arrow-up"></i>
                            <span>7h 45m tadi malam</span>
                        </div>
                    </div>
                </div>

                <!-- Emotion & Mood Tracking -->
                <div class="emotion-section">
                    <h4><i class="fas fa-brain"></i> Pelacakan Emosi & Mood</h4>
                    <div class="emotion-grid">
                        <div class="emotion-item active" data-emotion="calm">
                            <div class="emotion-icon">ğŸ˜Œ</div>
                            <div class="emotion-label">Tenang</div>
                            <div class="emotion-percentage">65%</div>
                            <div class="emotion-time">Dominan hari ini</div>
                        </div>
                        <div class="emotion-item moderate" data-emotion="stressed">
                            <div class="emotion-icon">ğŸ˜°</div>
                            <div class="emotion-label">Stres</div>
                            <div class="emotion-percentage">20%</div>
                            <div class="emotion-time">Puncak: 14:00</div>
                        </div>
                        <div class="emotion-item good" data-emotion="happy">
                            <div class="emotion-icon">ğŸ˜Š</div>
                            <div class="emotion-label">Bahagia</div>
                            <div class="emotion-percentage">15%</div>
                            <div class="emotion-time">Pagi hari</div>
                        </div>
                    </div>
                    
                    <!-- Current Mood Indicator -->
                    <div class="current-mood">
                        <div class="mood-indicator">
                            <div class="mood-circle">ğŸ˜Œ</div>
                            <div class="mood-info">
                                <h5>Mood Saat Ini: <span class="mood-text">Tenang & Fokus</span></h5>
                                <p>Kondisi ideal untuk melanjutkan hari tanpa rokok!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Craving Detection & Alert -->
                <div class="craving-detection" id="cravingDetection">
                    <div class="detection-header">
                        <h4><i class="fas fa-exclamation-triangle"></i> Deteksi Keinginan Merokok</h4>
                        <div class="detection-status safe" id="cravingStatus">
                            <span class="status-indicator"></span>
                            <span>Aman</span>
                        </div>
                    </div>
                    
                    <div class="craving-alert hidden" id="cravingAlert">
                        <div class="alert-content">
                            <div class="alert-icon">âš ï¸</div>
                            <div class="alert-text">
                                <h4>Potensi Keinginan Merokok Terdeteksi</h4>
                                <p>Detak jantung meningkat dan level stress tinggi terdeteksi. Ini mungkin menandakan keinginan untuk merokok.</p>
                            </div>
                        </div>
                        <div class="alert-actions">
                            <button class="alert-btn primary" onclick="startBreathingExercise()">
                                <i class="fas fa-lungs"></i>
                                Latihan Pernapasan
                            </button>
                            <button class="alert-btn secondary" onclick="requestSupport()">
                                <i class="fas fa-users"></i>
                                Minta Dukungan
                            </button>
                            <button class="alert-btn tertiary" onclick="openDistraction()">
                                <i class="fas fa-gamepad"></i>
                                Alihkan Perhatian
                            </button>
                        </div>
                    </div>

                    <!-- Prevention Tips -->
                    <div class="prevention-tips">
                        <h5>ğŸ’¡ Tips Pencegahan Berdasarkan Data:</h5>
                        <ul id="preventionTips">
                            <li>Level stress cenderung tinggi jam 14:00-16:00, coba lakukan istirahat sejenak</li>
                            <li>Detak jantung stabil saat mendengarkan musik, pertimbangkan playlist anti-rokok</li>
                            <li>Tidur berkualitas membantu mengurangi keinginan merokok di pagi hari</li>
                        </ul>
                    </div>
                </div>

                <!-- Health Insights from Smartwatch -->
                <div class="health-insights">
                    <h4><i class="fas fa-chart-line"></i> Insight Kesehatan</h4>
                    <div class="insight-grid">
                        <div class="insight-card positive">
                            <div class="insight-icon">ğŸ“ˆ</div>
                            <div class="insight-content">
                                <h5>Detak Jantung Istirahat</h5>
                                <p>Turun 8 BPM sejak berhenti merokok</p>
                                <span class="insight-value">-8 BPM</span>
                            </div>
                        </div>
                        <div class="insight-card positive">
                            <div class="insight-icon">ğŸ«</div>
                            <div class="insight-content">
                                <h5>Tingkat Oksigen</h5>
                                <p>Meningkat signifikan dalam 7 hari</p>
                                <span class="insight-value">+3%</span>
                            </div>
                        </div>
                        <div class="insight-card warning">
                            <div class="insight-icon">âš¡</div>
                            <div class="insight-content">
                                <h5>Level Stress</h5>
                                <p>Tinggi pada jam kerja, butuh manajemen</p>
                                <span class="insight-value">Perlu Perhatian</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activity Correlation -->
                <div class="activity-correlation">
                    <h4><i class="fas fa-running"></i> Korelasi Aktivitas</h4>
                    <div class="correlation-items">
                        <div class="correlation-item">
                            <div class="correlation-activity">ğŸš¶â€â™‚ï¸ Jalan Kaki</div>
                            <div class="correlation-effect positive">Mengurangi stress 45%</div>
                        </div>
                        <div class="correlation-item">
                            <div class="correlation-activity">ğŸ§˜â€â™‚ï¸ Meditasi</div>
                            <div class="correlation-effect positive">Detak jantung lebih stabil</div>
                        </div>
                        <div class="correlation-item">
                            <div class="correlation-activity">â˜• Minum Kopi</div>
                            <div class="correlation-effect neutral">Tidak mempengaruhi keinginan merokok</div>
                        </div>
                        <div class="correlation-item">
                            <div class="correlation-activity">ğŸ“± Social Media</div>
                            <div class="correlation-effect negative">Meningkatkan stress 15%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Chart -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">
                    <i class="section-icon fas fa-chart-line"></i>
                    Progress Chart
                </div>
                <div class="view-toggle">
                    <button class="toggle-btn active" onclick="switchChart('daily')">Harian</button>
                    <button class="toggle-btn" onclick="switchChart('weekly')">Mingguan</button>
                    <button class="toggle-btn" onclick="switchChart('monthly')">Bulanan</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="progressChart"></canvas>
            </div>
            <div class="chart-legend">
                <div class="legend-item">
                    <div class="legend-color success"></div>
                    <span>Hari Sukses</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color savings"></div>
                    <span>Penghematan</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color health"></div>
                    <span>Health Score</span>
                </div>
            </div>
        </div>

        <!-- Health Recovery Timeline -->
        <div class="section">
            <div class="section-title">
                <i class="section-icon fas fa-heartbeat"></i>
                Pemulihan Kesehatan
            </div>
            <div class="health-metrics">
                <div class="health-item improving">
                    <div class="health-icon">ğŸ«</div>
                    <div class="health-title">Fungsi Paru</div>
                    <div class="health-status">Membaik 15%</div>
                    <div class="health-progress">
                        <div class="health-progress-bar" style="width: 15%"></div>
                    </div>
                </div>
                <div class="health-item improving">
                    <div class="health-icon">ğŸ’“</div>
                    <div class="health-title">Sirkulasi Darah</div>
                    <div class="health-status">Membaik 20%</div>
                    <div class="health-progress">
                        <div class="health-progress-bar" style="width: 20%"></div>
                    </div>
                </div>
                <div class="health-item">
                    <div class="health-icon">ğŸ‘ƒ</div>
                    <div class="health-title">Penciuman</div>
                    <div class="health-status">Normal</div>
                    <div class="health-progress">
                        <div class="health-progress-bar" style="width: 90%"></div>
                    </div>
                </div>
                <div class="health-item">
                    <div class="health-icon">ğŸ’ª</div>
                    <div class="health-title">Energi</div>
                    <div class="health-status">Meningkat</div>
                    <div class="health-progress">
                        <div class="health-progress-bar" style="width: 75%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievement Badges -->
        <div class="section">
            <div class="section-title">
                <i class="section-icon fas fa-trophy"></i>
                Pencapaian & Lencana
            </div>
            <div class="badges-grid">
                <div class="badge-card earned" data-achievement="fire-starter">
                    <div class="badge-icon">ğŸ”¥</div>
                    <div class="badge-title">Fire Starter</div>
                    <div class="badge-desc">3 hari bebas rokok</div>
                </div>
                <div class="badge-card earned" data-achievement="money-saver">
                    <div class="badge-icon">ğŸ’°</div>
                    <div class="badge-title">Money Saver</div>
                    <div class="badge-desc">Hemat Rp 100K</div>
                </div>
                <div class="badge-card earned" data-achievement="week-warrior">
                    <div class="badge-icon">ğŸƒ</div>
                    <div class="badge-title">Week Warrior</div>
                    <div class="badge-desc">7 hari konsisten</div>
                </div>
                <div class="badge-card locked" data-achievement="champion">
                    <div class="badge-icon">ğŸ‘‘</div>
                    <div class="badge-title">Champion</div>
                    <div class="badge-desc">30 hari bebas rokok</div>
                </div>
                <div class="badge-card locked" data-achievement="diamond">
                    <div class="badge-icon">ğŸ’</div>
                    <div class="badge-title">Diamond</div>
                    <div class="badge-desc">90 hari bebas rokok</div>
                </div>
                <div class="badge-card locked" data-achievement="legend">
                    <div class="badge-icon">ğŸŒŸ</div>
                    <div class="badge-title">Legend</div>
                    <div class="badge-desc">1 tahun bebas rokok</div>
                </div>
            </div>
        </div>

        <!-- Detailed Savings -->
        <div class="section">
            <div class="section-title">
                <i class="section-icon fas fa-piggy-bank"></i>
                Detail Penghematan
            </div>
            <div class="savings-breakdown">
                <div class="savings-item">
                    <div class="savings-amount">Rp 30K</div>
                    <div class="savings-label">Minggu Ini</div>
                </div>
                <div class="savings-item">
                    <div class="savings-amount">Rp 210K</div>
                    <div class="savings-label">Total</div>
                </div>
                <div class="savings-item">
                    <div class="savings-amount">Rp 1.8M</div>
                    <div class="savings-label">Proyeksi/Tahun</div>
                </div>
                <div class="savings-item">
                    <div class="savings-amount">84</div>
                    <div class="savings-label">Batang Dihindari</div>
                </div>
            </div>
            
            <!-- Savings Goals -->
            <div class="savings-goals">
                <h4>ğŸ¯ Target Penghematan</h4>
                <div class="goal-item">
                    <div class="goal-info">
                        <span class="goal-title">Smartphone Baru</span>
                        <span class="goal-target">Rp 3.000.000</span>
                    </div>
                    <div class="goal-progress">
                        <div class="goal-progress-bar" style="width: 7%"></div>
                        <span class="goal-percentage">7%</span>
                    </div>
                </div>
                <div class="goal-item">
                    <div class="goal-info">
                        <span class="goal-title">Liburan Keluarga</span>
                        <span class="goal-target">Rp 5.000.000</span>
                    </div>
                    <div class="goal-progress">
                        <div class="goal-progress-bar" style="width: 4%"></div>
                        <span class="goal-percentage">4%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity Timeline -->
        <div class="section">
            <div class="section-title">
                <i class="section-icon fas fa-history"></i>
                Aktivitas Terkini
            </div>
            <div class="progress-timeline">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-title">Lencana Week Warrior Diraih! ğŸ†</div>
                        <div class="timeline-desc">Berhasil mencapai 7 hari bebas rokok berturut-turut</div>
                        <div class="timeline-time">Hari ini, 14:30</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-title">Smartwatch Terhubung</div>
                        <div class="timeline-desc">Monitoring kesehatan real-time dimulai</div>
                        <div class="timeline-time">Hari ini, 08:15</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-title">Progress Mingguan Tercapai</div>
                        <div class="timeline-desc">Target mingguan berhasil diselesaikan dengan sempurna</div>
                        <div class="timeline-time">Kemarin, 19:45</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-title">Hemat Rp 100.000! ğŸ’°</div>
                        <div class="timeline-desc">Pencapaian penghematan pertama yang luar biasa</div>
                        <div class="timeline-time">3 hari lalu, 16:20</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-btn btn-primary" onclick="shareProgress()">
                <i class="fas fa-share-alt"></i>
                Share Progress
            </button>
            <button class="action-btn btn-secondary" onclick="exportData()">
                <i class="fas fa-download"></i>
                Export Data
            </button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-container">
            <a href="home.html" class="nav-item">
                <i class="fas fa-home"></i>
                <span>Beranda</span>
            </a>
            <a href="progress.html" class="nav-item active">
                <i class="fas fa-chart-bar"></i>
                <span>Progress</span>
            </a>
            <a href="chatbot.html" class="nav-item">
                <i class="fas fa-robot"></i>
                <span>AI Helper</span>
            </a>
            <a href="komunitas.html" class="nav-item">
                <i class="fas fa-users"></i>
                <span>Komunitas</span>
            </a>
            <a href="target.html" class="nav-item">
                <i class="fas fa-bullseye"></i>
                <span>Target</span>
            </a>
            <a href="profile.html" class="nav-item">
                <i class="fas fa-user"></i>
                <span>Profil</span>
            </a>
        </div>
    </div>

    <!-- Breathing Exercise Modal -->
    <div class="modal" id="breathingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-lungs"></i> Latihan Pernapasan</h3>
                <button class="modal-close" onclick="closeBreathingModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="breathing-exercise">
                    <div class="breathing-circle" id="breathingCircle">
                        <div class="breathing-text" id="breathingText">Bersiap...</div>
                    </div>
                    <div class="breathing-controls">
                        <button class="breathing-btn" id="startBreathingBtn" onclick="startBreathing()">
                            <i class="fas fa-play"></i> Mulai
                        </button>
                        <button class="breathing-btn" id="stopBreathingBtn" onclick="stopBreathing()" style="display: none;">
                            <i class="fas fa-stop"></i> Berhenti
                        </button>
                    </div>
                    <div class="breathing-progress">
                        <div class="progress-bar" id="breathingProgress"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Menghubungkan ke smartwatch...</p>
    </div>

    <!-- JavaScript -->
    <script src="js/progress.js"></script>
</body>
</html>
